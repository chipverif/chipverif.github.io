---
import { Star, ExternalLink, BookOpen } from 'lucide-react';

interface Props {
  showSection?: boolean;
  showHeader?: boolean;
}

type Status = 'Active' | 'Maintenance' | 'Stable';
type Technology = 'Python' | 'Verilog' | 'SystemVerilog' | 'VHDL' | 'UVM';

const { showSection = true, showHeader = true } = Astro.props;

interface Project {
  name: string;
  description: string;
  stars: number;
  link: string;
  docs: string;
  icon: string;
  technologies: Technology[];
  status: Status;
  version?: string;
  lastUpdated?: string;
  category: 'cocotb' | 'commercial';
}

const statusColors: Record<Status, string> = {
  Active: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
  Maintenance: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',
  Stable: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'
};

const techColors: Record<Technology, string> = {
  'Python': 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200',
  'Verilog': 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
  'SystemVerilog': 'bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200',
  'VHDL': 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',
  'UVM': 'bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-200'
};

const projects: Project[] = [
  {
    name: 'CoCoTB DPI',
    description: 'Direct Programming Interface library, seamlessly connecting Python with Verilog/VHDL',
    stars: 156,
    link: 'https://github.com/chipverif/cocotb-dpi',
    docs: 'https://docs.cocotb.org/en/stable/',
    icon: 'üîó',
    technologies: ['Python', 'Verilog', 'VHDL'],
    status: 'Active',
    version: 'v2.1.0',
    category: 'cocotb'
  },
  {
    name: 'CoCoTB Ext',
    description: 'Build functional models and VIPs in Python. Leverage Python ecosystem for fast, flexible verification IP development',
    stars: 234,
    link: 'https://github.com/chipverif/cocotb-ext',
    docs: 'https://docs.cocotb.org/en/stable/',
    icon: '‚öôÔ∏è',
    technologies: ['Python', 'SystemVerilog'],
    status: 'Active',
    version: 'v1.5.0',
    category: 'cocotb'
  },
  {
    name: 'CoCoTB Driver',
    description: 'Universal driver framework supporting multiple bus protocols and interfaces',
    stars: 89,
    link: 'https://github.com/chipverif/cocotb-driver',
    docs: 'https://docs.cocotb.org/en/stable/',
    icon: 'üöó',
    technologies: ['Python', 'SystemVerilog'],
    status: 'Maintenance',
    lastUpdated: '2024-01-15',
    category: 'cocotb'
  },
  {
    name: 'AXI VIP',
    description: 'Complete AXI4 interface verification IP with master, slave, and monitor components',
    stars: 312,
    link: '/docs/axi-vip',
    docs: '/docs/axi-vip',
    icon: 'üéØ',
    technologies: ['SystemVerilog', 'UVM'],
    status: 'Stable',
    version: 'v4.2.0',
    category: 'commercial'
  },
  {
    name: 'APB VIP',
    description: 'APB bus verification IP supporting APB3 and APB4 protocols with full coverage',
    stars: 198,
    link: '/docs/apb-vip',
    docs: '/docs/apb-vip',
    icon: 'üìå',
    technologies: ['SystemVerilog', 'UVM'],
    status: 'Stable',
    version: 'v3.1.0',
    category: 'commercial'
  },
  {
    name: 'I2C VIP',
    description: 'I2C master and slave verification IP with multi-master support and full protocol coverage',
    stars: 245,
    link: '/docs/i2c-vip',
    docs: '/docs/i2c-vip',
    icon: 'üîå',
    technologies: ['SystemVerilog', 'UVM'],
    status: 'Stable',
    version: 'v2.8.0',
    category: 'commercial'
  },
  {
    name: 'SPI VIP',
    description: 'SPI verification IP supporting standard SPI, dual SPI, and quad SPI modes',
    stars: 189,
    link: '/docs/spi-vip',
    docs: '/docs/spi-vip',
    icon: 'üí´',
    technologies: ['SystemVerilog', 'UVM'],
    status: 'Stable',
    version: 'v2.5.0',
    category: 'commercial'
  },
  {
    name: 'UART VIP',
    description: 'UART verification IP supporting standard baud rates with configurable data format',
    stars: 167,
    link: '/docs/uart-vip',
    docs: '/docs/uart-vip',
    icon: 'üìª',
    technologies: ['SystemVerilog', 'UVM'],
    status: 'Stable',
    version: 'v2.3.0',
    category: 'commercial'
  },
];

const cocotbProjects = projects.filter(p => p.category === 'cocotb');
const commercialVIPs = projects.filter(p => p.category === 'commercial');
---

{showSection ? (
  <section class="py-24 bg-gray-50 dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      {showHeader && (
        <div class="text-center mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
            Core Projects
          </h2>
          <p class="text-gray-600 dark:text-gray-300">
            Professional verification tools accelerating chip verification development
          </p>
        </div>
      )}

      <div class="mb-20">
        <div class="mb-8">
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
            <span class="text-3xl">üêç</span>
            CoCoTB Platform
          </h3>
          <p class="text-gray-600 dark:text-gray-300 max-w-3xl">
            Python-based testbench framework and VIP development tools. Build powerful verification environments and create reusable VIPs with Python's flexibility.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {cocotbProjects.map((project) => (
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700 hover:-translate-y-1">
              <div class="flex items-start justify-between mb-4">
                <div class="text-4xl mb-2">{project.icon}</div>
                <div class="flex items-center gap-2">
                  <span class={`px-3 py-1 text-xs font-semibold rounded-full ${statusColors[project.status]}`}>
                    {project.status}
                  </span>
                  <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                    <Star className="w-4 h-4 mr-1 fill-yellow-400 text-yellow-400" />
                    {project.stars}
                  </div>
                </div>
              </div>

              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
                {project.name}
              </h3>

              <p class="text-gray-600 dark:text-gray-300 mb-4">
                {project.description}
              </p>

              <div class="flex flex-wrap gap-2 mb-4">
                {project.technologies.map((tech) => (
                  <span class={`px-2.5 py-0.5 text-xs font-medium rounded-md ${techColors[tech] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'}`}>
                    {tech}
                  </span>
                ))}
              </div>

              <div class="text-xs text-gray-500 dark:text-gray-400 mb-4">
                {project.version ? (
                  <span>Version: {project.version}</span>
                ) : (
                  <span>Last Updated: {project.lastUpdated}</span>
                )}
              </div>

              <div class="flex gap-3">
                <a
                  href={project.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg"
                >
                  <ExternalLink className="w-4 h-4 mr-2" />
                  GitHub
                </a>
                <a
                  href={project.docs}
                  class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-lg hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-600 dark:hover:to-gray-700 transition-all border border-gray-200 dark:border-gray-600"
                >
                  <BookOpen className="w-4 h-4 mr-2" />
                  Documentation
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>

      <div class="mb-20">
        <div class="mb-8">
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
            <span class="text-3xl">üíé</span>
            Commercial VIPs
          </h3>
          <p class="text-gray-600 dark:text-gray-300 max-w-3xl">
            Professional verification IPs available for free use. Proprietary codebase with comprehensive documentation and support.
          </p>
          <div class="flex items-center gap-2 mt-3">
            <span class="px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
              Free to Use
            </span>
            <span class="px-3 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
              Closed Source
            </span>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {commercialVIPs.map((project) => (
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700 hover:-translate-y-1">
              <div class="flex items-start justify-between mb-4">
                <div class="text-4xl mb-2">{project.icon}</div>
                <div class="flex items-center gap-2">
                  <span class={`px-3 py-1 text-xs font-semibold rounded-full ${statusColors[project.status]}`}>
                    {project.status}
                  </span>
                  <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                    <Star className="w-4 h-4 mr-1 fill-yellow-400 text-yellow-400" />
                    {project.stars}
                  </div>
                </div>
              </div>

              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
                {project.name}
              </h3>

              <p class="text-gray-600 dark:text-gray-300 mb-4">
                {project.description}
              </p>

              <div class="flex flex-wrap gap-2 mb-4">
                {project.technologies.map((tech) => (
                  <span class={`px-2.5 py-0.5 text-xs font-medium rounded-md ${techColors[tech] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'}`}>
                    {tech}
                  </span>
                ))}
              </div>

              <div class="text-xs text-gray-500 dark:text-gray-400 mb-4">
                {project.version ? (
                  <span>Version: {project.version}</span>
                ) : (
                  <span>Last Updated: {project.lastUpdated}</span>
                )}
              </div>

              <div class="flex gap-3">
                <a
                  href={project.link}
                  class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all shadow-md hover:shadow-lg"
                >
                  <BookOpen className="w-4 h-4 mr-2" />
                  Documentation
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>
) : (
  <>
    {showHeader && (
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">
          Core Projects
        </h2>
        <p class="text-gray-600 dark:text-gray-300">
          Professional verification tools accelerating chip verification development
        </p>
      </div>
    )}

    <div class="mb-20">
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
          <span class="text-3xl">üêç</span>
          CoCoTB Platform
        </h3>
        <p class="text-gray-600 dark:text-gray-300 max-w-3xl">
          Python-based testbench framework and VIP development tools. Build powerful verification environments and create reusable VIPs with Python's flexibility.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {cocotbProjects.map((project) => (
          <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700 hover:-translate-y-1">
            <div class="flex items-start justify-between mb-4">
              <div class="text-4xl mb-2">{project.icon}</div>
              <div class="flex items-center gap-2">
                <span class={`px-3 py-1 text-xs font-semibold rounded-full ${statusColors[project.status]}`}>
                  {project.status}
                </span>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <Star className="w-4 h-4 mr-1 fill-yellow-400 text-yellow-400" />
                  {project.stars}
                </div>
              </div>
            </div>

            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
              {project.name}
            </h3>

            <p class="text-gray-600 dark:text-gray-300 mb-4">
              {project.description}
            </p>

            <div class="flex flex-wrap gap-2 mb-4">
              {project.technologies.map((tech) => (
                <span class={`px-2.5 py-0.5 text-xs font-medium rounded-md ${techColors[tech] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'}`}>
                  {tech}
                </span>
              ))}
            </div>

            <div class="text-xs text-gray-500 dark:text-gray-400 mb-4">
              {project.version ? (
                <span>Version: {project.version}</span>
              ) : (
                <span>Last Updated: {project.lastUpdated}</span>
              )}
            </div>

            <div class="flex gap-3">
              <a
                href={project.link}
                target="_blank"
                rel="noopener noreferrer"
                class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg"
              >
                <ExternalLink className="w-4 h-4 mr-2" />
                GitHub
              </a>
              <a
                href={project.docs}
                class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-lg hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-600 dark:hover:to-gray-700 transition-all border border-gray-200 dark:border-gray-600"
              >
                <BookOpen className="w-4 h-4 mr-2" />
                Documentation
              </a>
            </div>
          </div>
        ))}
      </div>
    </div>

    <div class="mb-20">
      <div class="mb-8">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2">
          <span class="text-3xl">üíé</span>
          Commercial VIPs
        </h3>
        <p class="text-gray-600 dark:text-gray-300 max-w-3xl">
          Professional verification IPs available for free use. Proprietary codebase with comprehensive documentation and support.
        </p>
        <div class="flex items-center gap-2 mt-3">
          <span class="px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
            Free to Use
          </span>
          <span class="px-3 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200">
            Closed Source
          </span>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {commercialVIPs.map((project) => (
          <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all border border-gray-200 dark:border-gray-700 hover:-translate-y-1">
            <div class="flex items-start justify-between mb-4">
              <div class="text-4xl mb-2">{project.icon}</div>
              <div class="flex items-center gap-2">
                <span class={`px-3 py-1 text-xs font-semibold rounded-full ${statusColors[project.status]}`}>
                  {project.status}
                </span>
                <div class="flex items-center text-sm text-gray-500 dark:text-gray-400">
                  <Star className="w-4 h-4 mr-1 fill-yellow-400 text-yellow-400" />
                  {project.stars}
                </div>
              </div>
            </div>

            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
              {project.name}
            </h3>

            <p class="text-gray-600 dark:text-gray-300 mb-4">
              {project.description}
            </p>

            <div class="flex flex-wrap gap-2 mb-4">
              {project.technologies.map((tech) => (
                <span class={`px-2.5 py-0.5 text-xs font-medium rounded-md ${techColors[tech] || 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'}`}>
                  {tech}
                </span>
              ))}
            </div>

            <div class="text-xs text-gray-500 dark:text-gray-400 mb-4">
              {project.version ? (
                <span>Version: {project.version}</span>
              ) : (
                <span>Last Updated: {project.lastUpdated}</span>
              )}
            </div>

            <div class="flex gap-3">
              <a
                href={project.link}
                class="flex-1 flex items-center justify-center px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all shadow-md hover:shadow-lg"
              >
                <BookOpen className="w-4 h-4 mr-2" />
                Documentation
              </a>
            </div>
          </div>
        ))}
      </div>
    </div>
  </>
)}

